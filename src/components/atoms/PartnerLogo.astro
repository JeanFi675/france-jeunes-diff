---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

export interface Props {
  src: string | ImageMetadata;
  alt: string;
  backgroundColor?: 'white' | 'mint' | 'black';
  rotation?: number;
  width?: string;
  height?: string;
  href?: string;
}

const { src, alt, rotation = 0, width = '180px', height = '110px', href } = Astro.props;

const Element = href ? 'a' : 'div';
const elementProps = href ? { href, target: '_blank', rel: 'noopener noreferrer' } : {};
---

<Element
  class="partner-logo-container"
  {...elementProps}
  style={`
    --base-rotation: ${rotation}deg;
    display: inline-flex;
    background: var(--brutal-white);
    border: 4px solid var(--brutal-ice);
    box-shadow: 6px 6px 0 var(--brutal-black);
    padding: 0.5rem;
    transform: rotate(var(--base-rotation));
    transition: all 0.2s ease;
    width: ${width};
    height: ${height};
    overflow: hidden;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    cursor: ${href ? 'pointer' : 'default'};
  `}
>
  {
    typeof src === 'string' ? (
      <img
        src={`${import.meta.env.BASE_URL}${src}`}
        alt={alt}
        style={`
          width: 100%;
          height: 100%;
          object-fit: contain;
          display: block;
        `}
      />
    ) : (
      <Image
        src={src}
        alt={alt}
        style={`
          width: 100%;
          height: 100%;
          object-fit: contain;
          display: block;
        `}
      />
    )
  }
</Element>

<style>
  .partner-logo-container:hover {
    transform: translate(-2px, -2px) rotate(calc(var(--base-rotation) + 2deg));
    box-shadow: 8px 8px 0 var(--brutal-ice);
  }

  @media (max-width: 768px) {
    .partner-logo-container {
      width: 100px;
    }
  }
</style>
