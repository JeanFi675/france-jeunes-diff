---
export interface Props {
  eventId?: string;
}

const { eventId = "66713" } = Astro.props;

// URL du widget Togetzer avec param√®tres encod√©s
const widgetUrl = `https://togetzer.com/widget.php?params=YTo0OntzOjExOiJhcHBsaWVkVHlwZSI7czo1OiJldmVudCI7czo0OiJ0eXBlIjtzOjU6ImNhcnJlIjtzOjI6ImlkIjtzOjU6IjY2NzEzIjtzOjc6Im9wdGlvbnMiO086Mjk6IklsbHVtaW5hdGVcU3VwcG9ydFxDb2xsZWN0aW9uIjoxOntzOjg6IgAqAGl0ZW1zIjthOjI6e3M6NToiY29sb3IiO3M6NToiYmxhbmMiO3M6NjoiYm9yZGVyIjtzOjU6ImNhcnJlIjt9fX0=`;
---

<div class="togetzer-widget-container">
  <div class="togetzer-frame">
    <!-- Iframe visible sur desktop uniquement -->
    <iframe
      src={widgetUrl}
      width="412"
      height="160"
      style="width: 412px; height: 160px; border: none; max-width: 100%;"
      title="Widget Togetzer - Covoiturage √©v√©nement"
      class="togetzer-iframe">
    </iframe>
    
    <!-- Bouton alternatif pour mobile -->
    <div class="togetzer-mobile-alternative">
      <div style="text-align: center; padding: 2rem;">
        <div style="margin-bottom: 1.5rem;">
          <span style="font-size: 3rem;">üöó</span>
        </div>
        <h4 style="color: #EC407A; margin: 0 0 1rem 0; font-size: 1.2rem; font-weight: 900; text-transform: uppercase;">
          Plateforme de covoiturage
        </h4>
        <a href="https://togetzer.com/covoiturage-evenement/mzdj77" 
           target="_blank" 
           rel="noopener noreferrer"
           style="display: inline-block; background: #EC407A; color: white; padding: 0.8rem 1.5rem; text-decoration: none; font-weight: 700; text-transform: uppercase; font-size: 0.9rem;">
          Acc√©der au covoiturage ‚Üí
        </a>
      </div>
    </div>
  </div>
</div>

<style>
  .togetzer-widget-container {
    display: block;
    width: fit-content;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }
  
  .togetzer-widget-container:hover {
    z-index: 9999;
  }
  
  .togetzer-frame {
    border: 4px solid #EC407A;
    padding: 0;
    background: rgba(236, 64, 122, 0.05);
    transform: rotate(-1deg);
    box-shadow: 8px 8px 0 rgba(236, 64, 122, 0.3);
    transition: all 0.3s ease;
    display: inline-block;
    position: relative;
  }
  
  .togetzer-frame:hover {
    transform: rotate(0deg) scale(1.2);
    z-index: 9999;
    box-shadow: 12px 12px 0 rgba(236, 64, 122, 0.5);
  }
  
  .togetzer-frame iframe {
    display: block;
  }
  
  /* Alternative mobile cach√©e par d√©faut */
  .togetzer-mobile-alternative {
    display: none;
  }
  
  /* Sur mobile, on cache l'iframe et on affiche l'alternative */
  @media (max-width: 768px) {
    .togetzer-frame {
      transform: rotate(0deg);
      box-shadow: 4px 4px 0 rgba(236, 64, 122, 0.3);
    }
    
    .togetzer-frame:hover {
      transform: scale(1.02);
    }
    
    /* On cache l'iframe sur mobile */
    .togetzer-iframe {
      display: none !important;
    }
    
    /* On affiche l'alternative mobile */
    .togetzer-mobile-alternative {
      display: block;
    }
  }
</style>