---
export interface Props {
  src: string;
  alt: string;
  url: string;
  rotation?: number;
  width?: string;
  height?: string;
  caption?: string;
}

const {
  src,
  alt,
  url,
  rotation = 0,
  width = '180px',
  height = '110px',
  caption
} = Astro.props;
---

<div class="partner-card-wrapper">
  <a
    href={url}
    target="_blank"
    rel="noopener noreferrer"
    class="partner-card-link"
    style={`
      --base-rotation: ${rotation}deg;
      display: inline-flex;
      background: var(--brutal-white);
      border: 4px solid var(--brutal-black);
      box-shadow: 6px 6px 0 var(--brutal-black);
      padding: 0.25rem;
      transform: rotate(var(--base-rotation));
      transition: all 0.2s ease;
      width: ${width};
      height: ${height};
      overflow: hidden;
      align-items: center;
      justify-content: center;
      text-decoration: none;
    `}
  >
    <img
      src={`${import.meta.env.BASE_URL}/${src}`}
      alt={alt}
      style={`
        width: 100%;
        height: 100%;
        object-fit: contain;
        display: block;
      `}
    />
  </a>
  {caption && (
    <p class="partner-caption">{caption}</p>
  )}
</div>

<style>
.partner-card-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.partner-caption {
  font-family: var(--font-body);
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--brutal-black);
  text-align: center;
  margin: 0;
  max-width: 180px;
  line-height: 1.3;
}

.partner-card-link:hover {
  transform: translate(-4px, -4px) rotate(calc(var(--base-rotation) + 2deg));
  box-shadow: 10px 10px 0 var(--brutal-black);
}

@media (max-width: 768px) {
  .partner-card-link {
    width: 140px !important;
    height: 90px !important;
    padding: 0.5rem;
  }

  .partner-caption {
    font-size: 0.65rem;
    max-width: 140px;
  }
}
</style>