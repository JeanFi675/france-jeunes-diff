---
import BrutalHeading from '../atoms/BrutalHeading.astro';
import BrutalCard from '../atoms/BrutalCard.astro';
import ChampionsGrid from '../atoms/ChampionsGrid.astro';
import VideosGrid from '../atoms/VideosGrid.astro';
import { competitionData } from '../../data/competition-data.js';

const { wallData, historyEvents, champions, videos } = competitionData.arena;

// Ajouter BASE_URL aux chemins des photos et vid√©os
const baseUrl = import.meta.env.BASE_URL;
const wallPhotos = wallData.photos.map(photo => ({
  src: `${baseUrl}/${photo.src}`,
  alt: photo.alt
}));

const videosWithBaseUrl = videos.map(video => ({
  ...video,
  videoUrl: `${baseUrl}/${video.videoUrl}`,
  thumbnail: `${baseUrl}/${video.thumbnail}`
}));
---

<section class="brutal-section brutal-section--mint" id="arena">
  <div class="brutal-container">
    
    <!-- TITRE PRINCIPAL -->
    <div style="margin-bottom: 3rem; text-align: center;">
      <BrutalHeading level={2} rotation={-2} shadow={true} class="brutal-title text-l2">
        üèÜ L'AR√àNE DES CHAMPIONS
      </BrutalHeading>
    </div>
    
    <!-- 1. DONN√âES TECHNIQUES DU MUR (fond blanc) -->
    <BrutalCard variant="white" rotation={-1}>
      <div style="padding: 2rem;">
        <!-- Titre de la carte -->
        <div style="text-align: center; margin-bottom: 2rem;">
          <div style="background: var(--brutal-ice); padding: 0.5rem 1.5rem; display: inline-block;">
            <h3 style="color: var(--brutal-black); font-size: 1.75rem; margin: 0; font-family: 'Space Grotesk', sans-serif; font-weight: 700; text-transform: uppercase;">
              {wallData.title}
            </h3>
          </div>
        </div>

        <!-- Donn√©es techniques avec cadre noir -->
        <div class="technical-data">
          {wallData.specs.map((spec) => (
            <div class="data-item data-item--black">
              <div class="data-value">{spec.value}</div>
              <div class="data-label">{spec.label}</div>
            </div>
          ))}
        </div>
        
        <!-- Galerie photos du mur -->
        <div class="brutal-gallery">
          {wallPhotos.map((photo, index) => (
            <div class="brutal-gallery-item" data-image={index}>
              <div class={`brutal-photo-frame brutal-photo-frame--tilt-${index === 0 ? 'left' : index === 1 ? 'right' : 'slight'}`}>
                <img 
                  class="brutal-photo"
                  src={photo.src} 
                  alt={photo.alt}
                  loading="lazy"
                />
              </div>
              <div class="brutal-photo-badge">
                üì∏ {index + 1}/3
              </div>
            </div>
          ))}
        </div>
      </div>
    </BrutalCard>
    
    <!-- 2. TEXTE 20 ANS -->
    <div class="competition-fact" style="
      background: var(--brutal-black);
      color: var(--brutal-white);
      border: 4px solid var(--brutal-white);
      box-shadow: 8px 8px 0 var(--brutal-white);
      padding: 2rem;
      margin: 3rem 0;
      transform: rotate(-1deg);
      font-size: 1.25rem;
      line-height: 1.8;
      text-align: center;
      font-weight: 700;
      width: 100%;
    ">
      <p style="margin: 0;">
        Le mur de Saint-Pierre f√™tera ses 
        <span style="
          background: var(--brutal-ice);
          color: var(--brutal-black);
          padding: 0.1rem 0.4rem;
          display: inline-block;
          font-family: 'Space Mono', monospace;
          font-size: 1rem;
          font-weight: 700;
          text-transform: uppercase;
          letter-spacing: 0.02em;
          transform: rotate(-0.5deg);
        ">20 ans</span> !<br>
        Depuis 
        <span style="
          background: var(--brutal-ice);
          color: var(--brutal-black);
          padding: 0.1rem 0.4rem;
          display: inline-block;
          font-family: 'Space Mono', monospace;
          font-size: 1rem;
          font-weight: 700;
          text-transform: uppercase;
          letter-spacing: 0.02em;
          transform: rotate(0.5deg);
        ">2006</span>, 
        ce mur de 
        <span style="
          background: var(--brutal-ice);
          color: var(--brutal-black);
          padding: 0.1rem 0.4rem;
          display: inline-block;
          font-family: 'Space Mono', monospace;
          font-size: 1rem;
          font-weight: 700;
          text-transform: uppercase;
          letter-spacing: 0.02em;
          transform: rotate(-0.5deg);
        ">14,5 m√®tres</span> 
        accueille les futures stars de l'escalade.
        <span style="
          background: var(--brutal-ice);
          color: var(--brutal-black);
          padding: 0.1rem 0.4rem;
          display: inline-block;
          font-family: 'Space Mono', monospace;
          font-size: 1rem;
          font-weight: 700;
          text-transform: uppercase;
          letter-spacing: 0.02em;
          transform: rotate(0.5deg);
        ">2026 = 20 ans pile !</span>
      </p>
    </div>
    
    <!-- 3. PALMAR√àS ORGANISATIONNEL (fond blanc) -->
    <BrutalCard variant="white" rotation={1}>
      <div style="padding: 2rem;">
        <div style="text-align: center; margin-bottom: 2rem;">
          <div class="palmares-title-wrapper">
            <h3 class="palmares-title">
              Notre palmar√®s organisationnel
            </h3>
          </div>
        </div>
        
        <div class="history-events">
          {historyEvents.map(event => (
            <div class="event-item">
              <div class="event-header">
                <span class="event-year-tag" style="
                  background: var(--brutal-black);
                  color: var(--brutal-ice);
                  padding: 0.3rem 0.8rem;
                  font-family: 'Space Mono', monospace;
                  font-weight: 700;
                  font-size: 0.875rem;
                  text-transform: uppercase;
                  letter-spacing: 0.05em;
                  border: 2px solid var(--brutal-white);
                  box-shadow: 3px 3px 0 var(--brutal-white);
                  transform: rotate(-2deg);
                  display: inline-block;
                ">{event.year}</span>
              </div>
              <h4 class="event-title">{event.title}</h4>
              <p class="event-description">{event.description}</p>
            </div>
          ))}
        </div>
      </div>
    </BrutalCard>
    
    <!-- 4. CHAMPIONS QUI ONT GRIMP√â ICI (fond noir) -->
    <div style="margin-top: 3rem;">
      <BrutalCard variant="black" rotation={-2}>
        <div style="padding: 2rem;">
          <div style="text-align: center; margin-bottom: 2rem;">
            <div style="background: var(--brutal-ice); padding: 0.5rem 1.5rem; display: inline-block;">
              <h3 style="color: var(--brutal-black); font-size: 1.75rem; margin: 0; font-family: 'Space Grotesk', sans-serif; font-weight: 700; text-transform: uppercase;">
                Quelques champions qui ont grimp√© ici
              </h3>
            </div>
          </div>
          
          <ChampionsGrid champions={champions} />
        </div>
      </BrutalCard>
    </div>
    
    <!-- 5. VID√âOS (fond blanc) -->
    <div style="margin-top: 3rem;">
      <BrutalCard variant="white" rotation={2}>
        <div style="padding: 2rem;">
          <div style="text-align: center; margin-bottom: 2rem;">
            <div style="background: var(--brutal-ice); padding: 0.5rem 1.5rem; display: inline-block;">
              <h3 style="color: var(--brutal-black); font-size: 1.75rem; margin: 0; font-family: 'Space Grotesk', sans-serif; font-weight: 700; text-transform: uppercase;">
                Un aper√ßu de l'ambiance qui vous attend
              </h3>
            </div>
          </div>
          
          <h4 style="text-align: center; color: var(--brutal-black); margin-bottom: 2rem;">
            Vid√©os de nos comp√©titions
          </h4>
          
          <VideosGrid videos={videosWithBaseUrl} />
        </div>
      </BrutalCard>
    </div>
    
    <!-- 6. PHRASE FINALE -->
    <div style="margin: 4rem 0 2rem; text-align: center;">
      <div style="display: inline-block; background: var(--brutal-black); padding: 1.5rem 2rem; transform: rotate(-1deg); border: 4px solid var(--brutal-white); box-shadow: 8px 8px 0 var(--brutal-white);">
        <h3 style="color: var(--brutal-white); font-size: var(--size-l4); margin: 0; font-weight: 800; text-transform: uppercase; line-height: 1.2;">
          16-17 mai 2026 : <span style="color: var(--brutal-ice);">Qui marquera cette √©dition anniversaire ?</span>
        </h3>
      </div>
    </div>
    
  </div>
  
  <!-- Modal Gallery -->
  <div id="photo-modal" class="brutal-modal">
    <div class="brutal-modal-content">
      <img id="modal-image" class="brutal-modal-image" src="" alt="" />
      
      <!-- Bouton fermeture -->
      <button id="close-modal" class="brutal-modal-close">
        ‚úï
      </button>
      
      <!-- Navigation -->
      <button id="prev-photo" class="brutal-modal-nav brutal-modal-nav--prev">
        ‚Üê
      </button>
      
      <button id="next-photo" class="brutal-modal-nav brutal-modal-nav--next">
        ‚Üí
      </button>
      
      <!-- Compteur -->
      <div id="photo-counter" class="brutal-modal-counter">
        1 / 3
      </div>
    </div>
  </div>
  
  <!-- Modal Vid√©os -->
  <div id="video-modal" class="brutal-modal">
    <div class="brutal-modal-content">
      <div id="video-content" class="video-modal-content">
        <!-- Le contenu vid√©o sera ins√©r√© ici -->
      </div>
      
      <!-- Bouton fermeture -->
      <button id="close-video-modal" class="brutal-modal-close">
        ‚úï
      </button>
      
      <!-- Navigation -->
      <button id="prev-video" class="brutal-modal-nav brutal-modal-nav--prev">
        ‚Üê
      </button>
      
      <button id="next-video" class="brutal-modal-nav brutal-modal-nav--next">
        ‚Üí
      </button>
      
      <!-- Compteur et titre -->
      <div id="video-counter" class="brutal-modal-counter">
        <div class="video-counter-text">1 / 5</div>
        <div class="video-title-modal"></div>
      </div>
    </div>
  </div>
</section>

<style>
  .brutal-section {
    background: var(--brutal-ice);
    padding: 4rem 2rem;
    position: relative;
  }
  
  /* Donn√©es techniques */
  .technical-data {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
    margin-bottom: 2rem;
  }
  
  .data-item {
    text-align: center;
  }
  
  .data-item--black {
    background: var(--brutal-black);
    padding: 1.5rem 1rem;
    border: 4px solid var(--brutal-black);
    box-shadow: 8px 8px 0 var(--brutal-ice);
    transform: rotate(-1deg);
    transition: all 0.3s ease;
  }
  
  .data-item--black:nth-child(2) {
    transform: rotate(1deg);
  }
  
  .data-item--black:nth-child(3) {
    transform: rotate(-2deg);
  }
  
  .data-item--black:hover {
    transform: rotate(0deg) scale(1.05) translate(-4px, -4px);
    box-shadow: 12px 12px 0 var(--brutal-ice);
  }
  
  .data-item--black .data-value {
    font-family: 'Inter', sans-serif;
    font-weight: 900;
    font-size: var(--size-l3);
    color: var(--brutal-white);
    margin-bottom: 0.5rem;
    line-height: 1;
  }
  
  .data-item--black .data-label {
    font-family: 'Space Mono', monospace;
    font-weight: 700;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--brutal-ice);
  }
  
  /* Galerie photos */
  .brutal-gallery {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
    max-width: 1200px;
    margin: 2rem auto 0;
    animation: slide-brutal 1s ease-out forwards;
  }

  .brutal-gallery-item {
    cursor: pointer;
    position: relative;
    transition: transform 0.3s ease;
  }

  .brutal-gallery-item:hover {
    transform: translateY(-4px);
  }

  .brutal-photo-frame {
    background: var(--brutal-white);
    padding: 10px;
    border: 4px solid var(--brutal-black);
    box-shadow: 8px 8px 0 var(--brutal-black);
    height: 250px;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .brutal-photo-frame--tilt-left {
    transform: rotate(-2deg);
  }

  .brutal-photo-frame--tilt-right {
    transform: rotate(2deg);
  }

  .brutal-photo-frame--tilt-slight {
    transform: rotate(-1deg);
  }

  .brutal-gallery-item:hover .brutal-photo-frame {
    transform: rotate(0) translate(-4px, -4px);
    box-shadow: 12px 12px 0 var(--brutal-black);
  }

  .brutal-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .brutal-photo-badge {
    position: absolute;
    bottom: -10px;
    right: 10px;
    background: var(--brutal-ice);
    color: var(--brutal-black);
    padding: 0.5rem 1rem;
    font-weight: 800;
    font-size: 0.875rem;
    transform: rotate(2deg);
    box-shadow: 4px 4px 0 var(--brutal-black);
  }

  @keyframes slide-brutal {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Modal Gallery (copi√© de VenueSection) */
  .brutal-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    align-items: center;
    justify-content: center;
  }
  
  .brutal-modal-content {
    position: relative;
    max-width: 90%;
    max-height: 90%;
  }
  
  .brutal-modal-image {
    width: 100%;
    height: auto;
    max-height: 85vh;
    object-fit: contain;
    border: 4px solid var(--brutal-white);
    box-shadow: 0 0 50px rgba(127, 229, 176, 0.3);
  }
  
  .brutal-modal-close {
    position: absolute;
    top: -50px;
    right: 0;
    background: var(--brutal-ice);
    color: var(--brutal-black);
    font-size: 2rem;
    font-weight: 900;
    border: none;
    padding: 0.5rem 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .brutal-modal-close:hover {
    background: var(--brutal-white);
    transform: scale(1.1);
  }
  
  .brutal-modal-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: var(--brutal-ice);
    color: var(--brutal-black);
    font-size: 2rem;
    font-weight: 900;
    border: none;
    padding: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .brutal-modal-nav--prev {
    left: 20px;
  }
  
  .brutal-modal-nav--next {
    right: 20px;
  }
  
  .brutal-modal-nav:hover {
    background: var(--brutal-white);
    transform: translateY(-50%) scale(1.1);
  }
  
  .brutal-modal-counter {
    position: absolute;
    bottom: -50px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--brutal-black);
    color: var(--brutal-white);
    padding: 0.75rem 1.5rem;
    font-weight: 700;
    font-size: 1rem;
    border: 2px solid var(--brutal-white);
  }
  
  /* Modal vid√©o sp√©cifique */
  .video-modal-content {
    width: 100%;
    max-width: 800px;
    aspect-ratio: 16/9;
    background: var(--brutal-black);
    border: 4px solid var(--brutal-white);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--brutal-white);
    font-size: 1.5rem;
  }
  
  .video-counter-text {
    font-size: 1rem;
    margin-bottom: 0.5rem;
  }
  
  .video-title-modal {
    font-size: 0.875rem;
    text-align: center;
    opacity: 0.8;
  }
  
  /* Palmar√®s organisationnel */
  .palmares-title-wrapper {
    background: var(--brutal-ice);
    padding: 0.5rem 1.5rem;
    display: inline-block;
    max-width: 100%;
    box-sizing: border-box;
  }

  .palmares-title {
    color: var(--brutal-black);
    font-size: 1.75rem;
    margin: 0;
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 700;
    text-transform: uppercase;
    line-height: 1.3;
  }

  .history-events {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
  }
  
  .event-item {
    padding: 1.5rem;
    background: var(--brutal-ice);
    color: var(--brutal-black);
    border: 3px solid var(--brutal-black);
    box-shadow: 6px 6px 0 var(--brutal-black);
    transform: rotate(-1deg);
    transition: all 0.3s ease;
  }
  
  .event-item:nth-child(even) {
    transform: rotate(1deg);
    background: var(--brutal-black);
    color: var(--brutal-white);
    border: 3px solid var(--brutal-ice);
    box-shadow: 6px 6px 0 var(--brutal-ice);
  }
  
  .event-item:nth-child(even) .event-year-tag {
    background: var(--brutal-white) !important;
    color: var(--brutal-black) !important;
    border-color: var(--brutal-ice) !important;
    box-shadow: 3px 3px 0 var(--brutal-ice) !important;
  }
  
  .event-item:hover {
    transform: rotate(0deg) scale(1.05) translate(-3px, -3px);
    box-shadow: 9px 9px 0 var(--brutal-black);
  }
  
  .event-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }
  
  .event-icon {
    font-size: 1.5rem;
  }
  
  .event-title {
    font-family: 'Inter', sans-serif;
    font-weight: 800;
    font-size: 1rem;
    text-transform: uppercase;
    margin: 0.5rem 0;
    color: inherit;
  }
  
  .event-description {
    font-size: 0.875rem;
    line-height: 1.4;
    margin: 0.5rem 0;
    color: inherit;
  }
  
  
  /* Responsive */
  @media (max-width: 768px) {
    .brutal-section {
      padding: 3rem 1rem;
    }
    
    .technical-data {
      grid-template-columns: 1fr;
      gap: 1rem;
    }
    
    .data-item--black {
      transform: rotate(0deg) !important;
    }
    
    .data-item--black .data-value {
      font-size: var(--size-l4);
    }
    
    .brutal-gallery {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    
    .brutal-photo-frame {
      height: 200px;
    }
    
    .brutal-modal-nav {
      font-size: 1.5rem;
      padding: 0.75rem;
    }
    
    .brutal-modal-nav--prev {
      left: 10px;
    }
    
    .brutal-modal-nav--next {
      right: 10px;
    }
    
    .brutal-modal-close {
      font-size: 1.5rem;
      padding: 0.25rem 0.5rem;
      top: -40px;
    }
    
    .brutal-modal-counter {
      bottom: -40px;
      font-size: 0.875rem;
      padding: 0.5rem 1rem;
    }
    
    .history-events {
      grid-template-columns: 1fr;
      gap: 1rem;
    }
    
    .event-item {
      transform: rotate(0deg) !important;
    }

    /* Responsive pour titre palmar√®s sur mobile */
    .palmares-title-wrapper {
      padding: 0.5rem 1rem;
    }

    .palmares-title {
      font-size: 1.1rem;
      line-height: 1.4;
      word-break: break-word;
    }

  }
</style>

<script>
// Gallery Modal Logic - Utilise les donn√©es d√©j√† charg√©es
document.addEventListener('DOMContentLoaded', function() {
  // Images d√©j√† charg√©es dans le markup - on les r√©cup√®re du DOM
  const galleryItems = document.querySelectorAll('.brutal-gallery-item');
  const images = Array.from(galleryItems).map(item => {
    const img = item.querySelector('img');
    return {
      src: img.src,
      alt: img.alt
    };
  });
  
  let currentImageIndex = 0;
  
  const modal = document.getElementById('photo-modal');
  const modalImage = document.getElementById('modal-image');
  const counter = document.getElementById('photo-counter');
  const closeBtn = document.getElementById('close-modal');
  const prevBtn = document.getElementById('prev-photo');
  const nextBtn = document.getElementById('next-photo');
  
  // Ouvrir modal
  document.querySelectorAll('.brutal-gallery-item').forEach((item, index) => {
    item.addEventListener('click', () => {
      currentImageIndex = index;
      showModal();
    });
  });
  
  // Fermer modal
  closeBtn.addEventListener('click', hideModal);
  modal.addEventListener('click', (e) => {
    if (e.target === modal) hideModal();
  });
  
  // Navigation
  prevBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
    updateModal();
  });
  
  nextBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    currentImageIndex = (currentImageIndex + 1) % images.length;
    updateModal();
  });
  
  // Clavier
  document.addEventListener('keydown', (e) => {
    if (modal.style.display === 'flex') {
      switch(e.key) {
        case 'Escape': hideModal(); break;
        case 'ArrowLeft': prevBtn.click(); break;
        case 'ArrowRight': nextBtn.click(); break;
      }
    }
  });
  
  function showModal() {
    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
    updateModal();
  }
  
  function hideModal() {
    modal.style.display = 'none';
    document.body.style.overflow = '';
  }
  
  function updateModal() {
    modalImage.src = images[currentImageIndex].src;
    modalImage.alt = images[currentImageIndex].alt;
    counter.textContent = `${currentImageIndex + 1} / ${images.length}`;
  }
});

// Video Modal Logic - Utilise les donn√©es d√©j√† charg√©es
document.addEventListener('DOMContentLoaded', function() {
  // Vid√©os d√©j√† charg√©es dans le markup - on les r√©cup√®re du DOM
  const videoTiles = document.querySelectorAll('.video-tile');
  const videosData = Array.from(videoTiles).map(tile => {
    const title = tile.querySelector('.video-title')?.textContent || '';
    const videoUrl = tile.dataset.videoUrl || '';
    return {
      title: title,
      url: videoUrl
    };
  });
  
  let currentVideoIndex = 0;
  
  const videoModal = document.getElementById('video-modal');
  const videoContent = document.getElementById('video-content');
  const videoCounter = document.querySelector('#video-counter .video-counter-text');
  const videoTitleModal = document.querySelector('#video-counter .video-title-modal');
  const closeVideoBtn = document.getElementById('close-video-modal');
  const prevVideoBtn = document.getElementById('prev-video');
  const nextVideoBtn = document.getElementById('next-video');
  
  // Ouvrir modal vid√©o
  document.querySelectorAll('.video-tile').forEach((item, index) => {
    item.addEventListener('click', () => {
      currentVideoIndex = index;
      showVideoModal();
    });
  });
  
  // Fermer modal
  if (closeVideoBtn) {
    closeVideoBtn.addEventListener('click', hideVideoModal);
  }
  
  if (videoModal) {
    videoModal.addEventListener('click', (e) => {
      if (e.target === videoModal) hideVideoModal();
    });
  }
  
  // Navigation
  if (prevVideoBtn) {
    prevVideoBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      currentVideoIndex = (currentVideoIndex - 1 + videosData.length) % videosData.length;
      updateVideoModal();
    });
  }
  
  if (nextVideoBtn) {
    nextVideoBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      currentVideoIndex = (currentVideoIndex + 1) % videosData.length;
      updateVideoModal();
    });
  }
  
  // Clavier
  document.addEventListener('keydown', (e) => {
    if (videoModal && videoModal.style.display === 'flex') {
      switch(e.key) {
        case 'Escape': hideVideoModal(); break;
        case 'ArrowLeft': if (prevVideoBtn) prevVideoBtn.click(); break;
        case 'ArrowRight': if (nextVideoBtn) nextVideoBtn.click(); break;
      }
    }
  });
  
  function showVideoModal() {
    if (videoModal) {
      videoModal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
      updateVideoModal();
    }
  }
  
  function hideVideoModal() {
    if (videoModal) {
      videoModal.style.display = 'none';
      document.body.style.overflow = '';
      // Arr√™ter toutes les vid√©os
      const videos = videoContent.querySelectorAll('video');
      videos.forEach(video => {
        video.pause();
        video.currentTime = 0;
      });
    }
  }
  
  function updateVideoModal() {
    if (videoContent && videoCounter && videoTitleModal) {
      const currentVideo = videosData[currentVideoIndex];
      
      // Cr√©er et ins√©rer la vraie vid√©o
      videoContent.innerHTML = `
        <video 
          controls 
          autoplay 
          style="
            width: 100%; 
            height: 100%; 
            object-fit: contain;
            background: var(--brutal-black);
          "
          preload="metadata"
        >
          <source src="${currentVideo.url}" type="video/mp4" />
          Votre navigateur ne supporte pas la lecture vid√©o.
        </video>
      `;
      
      videoCounter.textContent = `${currentVideoIndex + 1} / ${videosData.length}`;
      videoTitleModal.textContent = currentVideo.title;
    }
  }
});
</script>