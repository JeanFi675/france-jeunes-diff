---
import BrutalHeading from '../atoms/BrutalHeading.astro';
import BrutalBadge from '../atoms/BrutalBadge.astro';
import BrutalCard from '../atoms/BrutalCard.astro';
import { competitionData } from '../../data/competition-data.js';

export interface Props {
  background?: 'white' | 'black' | 'mint';
}

const { background = 'black' } = Astro.props;
const { saturday, dimanche } = competitionData.program;
---

<section class={`brutal-section brutal-section--${background}`} id="programme">
  <div class="brutal-container">
    <div style="text-align: center; margin-bottom: 4rem;">
      <BrutalHeading 
        level={2} 
        rotation={-1}
        shadow={true}
        class="brutal-title text-l2"
      >
        PROGRAMME DES 2 JOURS
      </BrutalHeading>
    </div>

    <div style="text-align: center; margin-bottom: 4rem;">
      <BrutalBadge variant="mint" animated={true} size="normal">
        ðŸ”´ LIVE STREAMING
      </BrutalBadge>
    </div>

    <div class="brutal-grid" style="grid-template-columns: 1fr 1fr; align-items: start; gap: 3rem;">
      <BrutalCard variant="default" rotation={saturday.rotation} zIndex={2}>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
          <BrutalHeading level={3} rotation={0}>
            {saturday.date}
          </BrutalHeading>
          <BrutalBadge variant={saturday.badgeVariant}>{saturday.badge}</BrutalBadge>
        </div>

        <div class="program-schedule">
          <!-- HEURES PRINCIPALES - VisibilitÃ© immÃ©diate -->
          <div class="primary-schedule" style="margin-bottom: 2rem;">
            <div style="background: var(--brutal-ice); color: var(--brutal-black); padding: 1rem; font-weight: 900; font-size: 1.25rem; text-align: center; transform: rotate(-1deg);">
              {saturday.mainHours}
            </div>
          </div>

          <div class="secondary-details" style="opacity: 0.8; font-size: 0.9rem;">
            {saturday.details.map((detail) => (
              <div style="margin-bottom: 0.75rem;">â€¢ <strong>{detail.time}</strong> {detail.label}</div>
            ))}
          </div>
        </div>
      </BrutalCard>

      <BrutalCard variant="mint" rotation={dimanche.rotation} zIndex={1}>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
          <BrutalHeading level={3} rotation={0} style="color: white; text-shadow: none;">
            {dimanche.date}
          </BrutalHeading>
          <BrutalBadge variant={dimanche.badgeVariant}>
            {dimanche.badge}
          </BrutalBadge>
        </div>

        <div class="program-schedule">
          <!-- HEURES PRINCIPALES - VisibilitÃ© immÃ©diate -->
          <div class="primary-schedule" style="margin-bottom: 2rem;">
            <div style="background: var(--brutal-black); color: var(--brutal-white); padding: 1rem; font-weight: 900; font-size: 1.25rem; text-align: center; transform: rotate(1deg);">
              {dimanche.mainHours}
            </div>
          </div>

          <div class="secondary-details" style="opacity: 0.9; font-size: 0.9rem; color: var(--brutal-black);">
            {dimanche.details.map((detail) => (
              <div style="margin-bottom: 0.75rem;">â€¢ <strong>{detail.time}</strong> {detail.label}</div>
            ))}
          </div>
        </div>
      </BrutalCard>
    </div>
  </div>
</section>

<style>
  @media (max-width: 768px) {
    .brutal-grid {
      grid-template-columns: 1fr !important;
      gap: 2rem !important;
      align-items: stretch !important;
    }
    
    .brutal-card {
      margin-right: 0;
      transform: rotate(0deg);
      min-height: auto;
      margin-bottom: 2rem;
    }

    .program-schedule {
      padding-bottom: 1rem;
    }

    .primary-schedule > div {
      font-size: 1.1rem !important;
      padding: 0.75rem !important;
    }

    .secondary-details {
      font-size: 0.85rem !important;
      margin-bottom: 1rem;
    }
  }
</style>