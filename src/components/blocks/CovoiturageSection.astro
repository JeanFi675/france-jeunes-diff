---
import BrutalHeading from '../atoms/BrutalHeading.astro';
import BrutalCard from '../atoms/BrutalCard.astro';
import BrutalBadge from '../atoms/BrutalBadge.astro';
import BrutalTogetzerWidget from '../atoms/BrutalTogetzerWidget.astro';

export interface Props {
  id?: string;
}

const { id } = Astro.props;
---

<section class="brutal-section brutal-section--mint" id="covoiturage">
  <div class="brutal-container">
    
    <div style="margin-bottom: 3rem; text-align: center;">
      <BrutalHeading level={2} rotation={-2} shadow={true} class="brutal-title text-l2">
        üöó VENIR EN VOITURE
      </BrutalHeading>
    </div>
    
    <!-- Adresse et infos GPS -->
    <div class="address-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 3rem;">
      <BrutalCard variant="white" rotation={-1}>
        <div style="padding: 2rem;">
          <div style="text-align: center; margin-bottom: 1rem;">
            <div style="background: var(--brutal-ice); padding: 0.5rem 1.5rem; display: inline-block;">
              <h3 style="color: var(--brutal-black); font-size: 1.5rem; margin: 0; font-family: 'Space Grotesk', sans-serif; font-weight: 700; text-transform: uppercase;">
                üìç ADRESSE EXACTE
              </h3>
            </div>
          </div>
          <p style="color: var(--brutal-black); font-size: 1.25rem; line-height: 1.6; font-weight: 600;">
            Complexe Sportif du Pays Rochois<br>
            <strong style="color: var(--brutal-black);">110 rue des Alpes</strong><br>
            74800 Saint-Pierre-en-Faucigny
          </p>
          <div style="margin-top: 1.5rem;">
            <BrutalBadge variant="mint" size="small">
              GPS: 46.0637¬∞N, 6.3751¬∞E
            </BrutalBadge>
          </div>
        </div>
      </BrutalCard>
      
      <BrutalCard variant="black" rotation={1}>
        <div style="padding: 2rem;">
          <div style="text-align: center; margin-bottom: 1rem;">
            <div style="background: var(--brutal-ice); padding: 0.5rem 1.5rem; display: inline-block;">
              <h3 style="color: var(--brutal-black); font-size: 1.5rem; margin: 0; font-family: 'Space Grotesk', sans-serif; font-weight: 700; text-transform: uppercase;">
                ‚è±Ô∏è TEMPS DE TRAJET
              </h3>
            </div>
          </div>
          <ul style="list-style: none; padding: 0; color: var(--brutal-white); font-size: 1.1rem; line-height: 1.8;">
            <li>üöó <strong>Gen√®ve</strong> : 30 min</li>
            <li>üöó <strong>Annecy</strong> : 40 min</li>
            <li>üöó <strong>Chamonix</strong> : 50 min</li>
            <li>üöó <strong>Lyon</strong> : 1h45</li>
          </ul>
        </div>
      </BrutalCard>
    </div>
    
    <!-- Plan des parkings -->
    <BrutalCard variant="white" rotation={0} className="parking-map-card">
      <div style="padding: 2rem;">
        <div style="text-align: center; margin-bottom: 2rem;">
          <div style="background: var(--brutal-ice); padding: 0.5rem 1.5rem; display: inline-block;">
            <h3 style="color: var(--brutal-black); font-size: 1.75rem; margin: 0; font-family: 'Space Grotesk', sans-serif; font-weight: 700; text-transform: uppercase;">
              üÖøÔ∏è PLAN DES PARKINGS GRATUITS
            </h3>
          </div>
        </div>
        
        <div class="parking-map-container">
          <img 
            src={`${import.meta.env.BASE_URL}/parking-plan.png`}
            alt="Plan des parkings gratuits autour du complexe sportif" 
            class="parking-map"
          />
        </div>
        
        <div class="parking-legend">
          <p style="font-size: 1.1rem; margin-top: 1.5rem; text-align: center; color: var(--brutal-black);">
            <strong>4 parkings gratuits</strong> √† proximit√© imm√©diate<br>
            <span style="color: var(--brutal-ice); font-weight: 700;">‚û°Ô∏è Plus de 200 places disponibles</span>
          </p>
        </div>
      </div>
    </BrutalCard>
    
    <!-- Togetzer Covoiturage Platform -->
    <div style="margin-top: 3rem;">
      <BrutalCard variant="black" rotation={-2} className="togetzer-card">
        <div style="padding: 2rem;">
          <div style="text-align: center; margin-bottom: 1rem;">
            <div style="background: var(--brutal-white); padding: 0.5rem 1.5rem; display: inline-block;">
              <h3 style="color: var(--brutal-black); font-size: 1.75rem; margin: 0; font-family: 'Space Grotesk', sans-serif; font-weight: 700; text-transform: uppercase;">
                ü§ù COVOITURAGE OFFICIEL
              </h3>
            </div>
          </div>
          <p style="color: var(--brutal-white); font-size: 1.1rem; line-height: 1.6; margin-bottom: 2rem; text-align: center;">
            Organisez votre trajet avec d'autres participants et spectateurs !<br>
            <strong style="color: var(--brutal-ice);">Plateforme officielle de l'√©v√©nement</strong>
          </p>
          
          <!-- Widget Togetzer officiel enrichi -->
          <div class="togetzer-widget-enhanced">
            <!-- Avantages Togetzer -->
            <div class="togetzer-benefits">
              <div class="benefit-item">
                <div class="benefit-icon">üÜì</div>
                <div class="benefit-label">GRATUIT<br>SANS PUBLICIT√â</div>
              </div>
              <div class="benefit-item">
                <div class="benefit-icon">üîí</div>
                <div class="benefit-label">S√âCURIS√â<br>DONN√âES PROT√âG√âES</div>
              </div>
              <div class="benefit-item">
                <div class="benefit-icon">‚ö°</div>
                <div class="benefit-label">SIMPLE<br>FORMULAIRE FACILE</div>
              </div>
            </div>
            
            <!-- Widget Togetzer -->
            <div style="display: flex; justify-content: center; margin: 2rem 0;">
              <BrutalTogetzerWidget />
            </div>
            
            <!-- Comment √ßa marche -->
            <div class="how-it-works">
              <div class="how-grid">
                <div class="how-item how-item--white">
                  <h4>üöó CONDUCTEURS</h4>
                  <p>Proposez vos places<br><strong>Partagez vos frais</strong></p>
                </div>
                <div class="how-item how-item--mint">
                  <h4>üìß CONFIRMATION</h4>
                  <p>Les conducteurs valident<br><strong>Pas d'attente inutile</strong></p>
                </div>
                <div class="how-item how-item--mint">
                  <h4>üí¨ CONTACT</h4>
                  <p>Email ou t√©l√©phone<br><strong>Communication directe</strong></p>
                </div>
                <div class="how-item how-item--white">
                  <h4>‚úâÔ∏è AUCUN COMPTE</h4>
                  <p>Pas d'inscription obligatoire<br><strong>Utilisation imm√©diate</strong></p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Lien vers plateforme compl√®te -->
          <div style="text-align: center; margin-top: 2rem; padding-top: 1.5rem; border-top: 2px dashed var(--brutal-ice);">
            <a href="https://togetzer.com/covoiturage-evenement/mzdj77" 
               target="_blank" 
               rel="noopener noreferrer" 
               class="togetzer-button">
               üåê VOIR TOUS LES TRAJETS SUR TOGETZER ‚Üí
            </a>
          </div>
        </div>
      </BrutalCard>
    </div>
    
  </div>
</section>

<style>
  .brutal-section {
    background: var(--brutal-ice);
    padding: 4rem 2rem;
    position: relative;
  }
  
  /* Styles pour les titres de cat√©gories */
  .category-title {
    padding: 1rem 1.5rem;
    font-size: 1.5rem;
    font-weight: 700;
    text-align: center;
    text-transform: uppercase;
    font-family: 'Space Grotesk', sans-serif;
  }
  
  .category-title--white {
    background: var(--brutal-white);
    color: var(--brutal-black);
  }
  
  .category-title--mint {
    background: var(--brutal-ice);
    color: var(--brutal-black);
  }
  
  .parking-map-container {
    width: 100%;
    max-width: 100%;
    overflow: hidden;
    background: var(--brutal-white);
    padding: 1rem;
    border: 4px solid var(--brutal-black);
    margin: 0 auto;
  }
  
  .parking-map {
    width: 100%;
    height: auto;
    display: block;
    max-width: 100%;
  }
  
  /* Widget Togetzer enrichi */
  .togetzer-widget-enhanced {
    margin: 2rem 0;
  }
  
  /* Avantages Togetzer */
  .togetzer-benefits {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-bottom: 2rem;
  }
  
  .benefit-item {
    background: var(--brutal-white);
    padding: 1.5rem 1rem;
    text-align: center;
    transform: rotate(-1deg);
    transition: all 0.3s ease;
    box-shadow: 8px 8px 0 var(--brutal-black);
    position: relative;
  }
  
  .benefit-item:nth-child(2) {
    background: var(--brutal-ice);
    transform: rotate(1deg);
  }
  
  .benefit-item:nth-child(3) {
    transform: rotate(-2deg);
  }
  
  .benefit-item:hover {
    transform: rotate(0deg) scale(1.05) translate(-4px, -4px);
    box-shadow: 12px 12px 0 var(--brutal-black);
  }
  
  .benefit-icon {
    font-size: 2.5rem;
    margin-bottom: 0.75rem;
  }
  
  .benefit-label {
    color: var(--brutal-black);
    font-size: 0.85rem;
    font-weight: 700;
    text-transform: uppercase;
    line-height: 1.3;
  }
  
  
  /* Comment √ßa marche */
  .how-it-works {
    margin-top: 2rem;
  }
  
  .how-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
  }
  
  .how-item {
    padding: 1.5rem 1rem;
    text-align: center;
    transition: all 0.3s ease;
    position: relative;
  }
  
  .how-item--white {
    background: var(--brutal-white);
    transform: rotate(-1deg);
    box-shadow: 6px 6px 0 var(--brutal-black);
  }
  
  .how-item--mint {
    background: var(--brutal-ice);
    transform: rotate(1deg);
    box-shadow: 6px 6px 0 var(--brutal-black);
  }
  
  .how-item:hover {
    transform: rotate(0deg) scale(1.03) translate(-3px, -3px);
    box-shadow: 10px 10px 0 var(--brutal-black);
  }
  
  .how-item h4 {
    color: var(--brutal-black);
    font-size: 1rem;
    margin: 0 0 0.75rem 0;
    font-weight: 700;
    text-transform: uppercase;
  }
  
  .how-item p {
    color: var(--brutal-black);
    margin: 0;
    font-size: 0.9rem;
    line-height: 1.4;
  }
  
  .how-item strong {
    color: var(--brutal-black);
    opacity: 0.8;
  }
  
  .togetzer-button {
    display: inline-block;
    background: #EC407A;
    color: var(--brutal-white);
    padding: 1rem 2rem;
    font-weight: 900;
    text-decoration: none;
    text-transform: uppercase;
    font-size: 1.2rem;
    letter-spacing: 0.05em;
    transform: rotate(-1deg);
    transition: all 0.2s;
    box-shadow: 6px 6px 0 var(--brutal-black);
  }
  
  .togetzer-button:hover {
    transform: rotate(0deg) scale(1.05) translate(-4px, -4px);
    box-shadow: 10px 10px 0 var(--brutal-black);
    background: #D81B60;
  }

  @media (max-width: 768px) {
    .brutal-section {
      padding: 3rem 1rem;
    }
    
    /* Cards Adresse et Temps de trajet en colonne sur mobile */
    .address-grid {
      grid-template-columns: 1fr !important;
    }
    
    .parking-map-container {
      padding: 0.5rem;
    }
    
    /* Widget enrichi responsive */
    .togetzer-benefits {
      grid-template-columns: 1fr;
      gap: 1rem;
    }
    
    .benefit-item {
      transform: rotate(0deg) !important;
      box-shadow: 4px 4px 0 var(--brutal-black) !important;
    }
    
    .benefit-item:hover {
      transform: scale(1.02) !important;
      box-shadow: 6px 6px 0 var(--brutal-black) !important;
    }
    
    .widget-container {
      transform: rotate(0deg);
    }
    
    .how-grid {
      grid-template-columns: 1fr;
      gap: 1rem;
    }
    
    .how-item--white,
    .how-item--mint {
      transform: rotate(0deg) !important;
      box-shadow: 4px 4px 0 var(--brutal-black) !important;
    }
    
    .how-item:hover {
      transform: scale(1.02) !important;
      box-shadow: 6px 6px 0 var(--brutal-black) !important;
    }
    
    .platform-link {
      padding: 0.75rem 1rem;
      font-size: 0.8rem;
      transform: rotate(0deg);
    }
  }
</style>

<!-- 
<style is:global>
  Style global pour iframe Togetzer TEMPORAIREMENT D√âSACTIV√â POUR DEBUG
  .widget-container iframe {
    width: 412px !important;
    height: 172px !important;
    border: none !important;
    display: block !important;
    box-shadow: 8px 8px 0 var(--brutal-black) !important;
    background: transparent !important;
    margin: 0 !important;
    padding: 0 !important;
  }
</style>
-->